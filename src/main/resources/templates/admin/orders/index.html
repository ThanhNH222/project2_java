<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản lý khách hàng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/admin.css}">

</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <h4 class="text-white mb-4">🚗 Car Rental</h4>
    <a href="/admin">📊 Dashboard</a>
    <a href="/admin/cars">🚘 Cars</a>
    <a href="/admin/orders" class="active">👥 Rental Order</a>
</div>

<!-- Content -->
<div class="content">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="m-0">👥 Rental Orders</h2>
    </div>

    <!-- Thông báo -->
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <!-- Bộ lọc & tìm kiếm -->
    <form th:action="@{/admin/orders}" method="get" class="row g-2 mb-3">
        <div class="col-md-4">
            <input type="text" name="keyword" class="form-control"
                   placeholder="🔍 Tìm theo tên hoặc email" th:value="${keyword}">
        </div>
        <div class="col-md-3">
            <select name="status" class="form-select" th:value="${status}">
                <option value="">-- Tất cả trạng thái --</option>
                <option value="ACTIVE">Đang thuê</option>
                <option value="INACTIVE">Đã hoàn tất thuê</option>
            </select>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Lọc</button>
        </div>
    </form>

    <!-- Bảng đơn thuê -->
    <div class="card-dark">
        <h5 class="card-title">Danh sách đơn thuê</h5>
        <div class="table-responsive">
            <table class="table table-hover align-middle mt-3 text-white">
                <thead class="table-dark">
                <tr>
                    <th>STT</th>
                    <th>Khách hàng</th>
                    <th>Số điện thoại</th>
                    <th>Email</th>
                    <th>Xe thuê</th>
                    <th>Thời gian giao xe</th>
                    <th>Địa chỉ giao xe</th>
                    <th>Thời gian trả xe</th>
                    <th>Địa chỉ trả xe</th>
                    <th>Chi tiết</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="order, stt : ${orders}">
                    <td th:text="${stt.index + 1}"></td>
                    <td th:text="${order.customerName}"></td>
                    <td th:text="${order.customerPhone}"></td>
                    <td th:text="${order.customerEmail}"></td>
                    <td th:text="${order.car.name}"></td>
                    <td th:text="${order.pickupDateTime}"></td>
                    <td th:text="${order.pickupLocation}"></td>
                    <td th:text="${order.dropoffDateTime}"></td>
                    <td th:text="${order.returnLocation}"></td>
                    <td>
                        <a th:href="@{'/admin/orders/detail/' + ${order.id}}" class="btn btn-sm btn-primary">
                            Details
                        </a>

                    </td>
                    <td th:text="${order.status != null ? order.status : '—'}"></td>

                </tr>

                <tr th:if="${#lists.isEmpty(orders)}">
                    <td colspan="11" class="text-center text-muted">Không có đơn thuê nào</td>
                </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
